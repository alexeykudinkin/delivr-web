<% content_for :map_overlay do %>

  <style type="text/css">

    .new-travel-form {
      max-height: 80%;  /* doesn't work unless height of the containing block explicitly specified */
      overflow: scroll;
    }

  </style>

  <div class="map-overlay col-sm-4">

    <div class="row">

      <div class="panel panel-default">

        <!--<div class="panel-heading">-->
          <!--<h3 class="panel-title">New travel</h3>-->
        <!--</div>-->

        <div class="new-travel-form panel-body">

          <%= form_for @travel, html: { class: "form-horizontal", role: "form" } do |form| %>

            <div class="form-body col-sm-12">

              <div class="origin form-group">
                <%= push_fields_for(form, :origin) %>
              </div>

              <div class="destination form-group">
                <%= push_fields_for(form, :destinations) %>
              </div>

              <div class="form-group">
                <%= link_to_add_fields(form, "$(this).parents(\".form-group\")", :destinations) %>
              </div>

              <div class="form-group">
                <%= form.submit(class: "btn btn-primary") %>
              </div>

            </div>

          <% end %>

        </div>

      </div>

  </div>

  </div>

  <script>
    shipper.Q.enqueue("init", function() {

      shipper.registerTrackerAndAutoComplete();

      shipper.createTravel();

    });
  </script>

<% end %>